{% load static i18n %}
{% get_current_language as LANGUAGE_CODE %}

<!-- Payment Modal -->
<div id="paymentModal" class="fixed inset-0 bg-black bg-opacity-60 hidden z-50 flex items-center justify-center px-4">
  <div class="bg-white rounded-xl shadow-lg max-w-lg w-full p-6 relative">

    <!-- Close Button -->
    <button onclick="closePaymentModal()" class="absolute top-2 right-4 text-gray-600 text-xl hover:text-gray-900">&times;</button>

    <!-- Title -->
    <h2 class="text-2xl font-bold text-center mb-6 text-gray-800">{% trans "Complete Your Payment" %}</h2>

    <!-- Payment Method Selection -->
<div class="flex flex-col items-center gap-2 mb-6">
  <div id="paymentMethodButtons" class="flex justify-center flex-wrap gap-3">
    <!-- Buttons will be injected here -->
  </div>
  <p id="mobileMoneyNote" class="text-xs text-red-600 text-center mt-1 hidden">
    {% trans "Mobile Money is only available on mobile devices." %}
  </p>
</div>

    <!-- Payment Summary -->
    <div class="space-y-3 text-sm text-gray-700 mb-6" id="paymentSummary">
      <div class="flex justify-between border-b pb-1">
        <span class="font-medium">{% trans "Kit" %}:</span>
        <span id="paymentKit">-</span>
      </div>
      <div class="flex justify-between border-b pb-1">
        <span class="font-medium">{% trans "Subscription Plan" %}:</span>
        <span id="paymentPlan">-</span>
      </div>
      <div class="flex justify-between border-b pb-1">
        <span class="font-medium">{% trans "Installation Fee" %}:</span>
        <span id="paymentInstallFee">$0.00</span>
      </div>
      <div class="flex justify-between border-b pb-1">
        <span class="font-medium">{% trans "Subtotal" %}:</span>
        <span id="paymentSubtotal">$0.00</span>
      </div>
      <div class="flex justify-between border-b pb-1">
        <span class="font-medium">{% trans "VAT" %}:</span>
        <span id="paymentVAT">$0.00</span>
      </div>
      <div class="flex justify-between border-b pb-1">
        <span class="font-medium">{% trans "Excise" %}:</span>
        <span id="paymentExcise">$0.00</span>
      </div>
      <div class="flex justify-between text-lg font-bold text-purple-700 pt-2">
        <span>{% trans "Grand Total" %}:</span>
        <span id="paymentTotal">$0.00</span>
      </div>
    </div>

    <!-- Mobile Money Form -->
    <form id="mobileMoneyForm" class="space-y-4 hidden" onsubmit="return submitMobileMoney(event)">
      {% csrf_token %}
      <input type="hidden" name="order_id" id="paymentOrderIdMobile">
      <input type="tel" name="phone_number" id="phoneNumber" required pattern="\d{9,15}"
             placeholder="{% trans 'Mobile Number' %}"
             class="w-full border rounded px-3 py-2 text-sm focus:ring focus:border-green-500" />
      <button type="submit"
              class="w-full py-3 bg-green-600 text-white rounded hover:bg-green-700 font-semibold">
        {% trans "Pay with Mobile Money" %}
      </button>
    </form>

    <!-- Credit Card Section -->
    <div id="creditCardSection" class="hidden">
      <button onclick="launchCardPayment()" class="w-full py-3 bg-blue-600 text-white rounded hover:bg-blue-700 font-semibold">
        {% trans "Pay with Credit Card" %}
      </button>
    </div>

  </div>
</div>
