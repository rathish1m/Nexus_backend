[pytest]
DJANGO_SETTINGS_MODULE = nexus_backend.settings
python_files = tests.py test_*.py *_tests.py
pythonpath = .
django_find_project = false
import_mode = importlib

# Test discovery paths
testpaths =
    app_settings/tests
    api/tests
    customer/tests
    dashboard_bi/tests
    feedbacks/tests
    geo_regions/tests
    kyc_management/tests
    main/tests
    nexus_backend/tests
    promotions/tests
    sales/tests
    user/tests
    client_app/tests
    backoffice/tests
    billing_management/tests
    orders/tests
    site_survey/tests
    stock/tests
    subscription/tests
    tech/tests
    tests
    ticketing/tests
    user/tests
    website/tests


# Do not recurse into heavy suites for default runs
norecursedirs =
    tests/integration
    tests/e2e

# Test markers
markers =
    unit: Unit tests for individual components
    integration: Integration tests for multiple components
    e2e: End-to-end tests for full workflows
    survey: Site survey related tests
    installation: Installation and tech related tests
    billing: Billing management tests
    i18n: Internationalization and translation tests
    api: API endpoint tests
    notifications: Notification system tests
    slow: Tests that take more than 1 second
    external: Tests that require external services (mocked in CI)
    database: Tests that require database access

# Performance and output options
addopts =
    --strict-markers
    --reuse-db
    --nomigrations
    --tb=short
    --maxfail=5
    --ff
    -v
    --cov-report=term-missing:skip-covered
    --cov-report=html
    --cov-report=json
    --cov-config=.coveragerc
    # --dist=loadfile
    # -n auto

# Coverage options (see .coveragerc for detailed config)
# Minimum coverage threshold is enforced in .coveragerc

# Warnings
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

base_url = http://localhost:8000
