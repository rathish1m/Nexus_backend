# Test Environment Configuration
# This file is used for running tests

USE_POSTGIS_TESTS=1

# Django Configuration
DJANGO_SECRET_KEY=test-secret-key-for-testing-only-not-for-production
DEBUG=False
DJANGO_SETTINGS_MODULE=nexus_backend.settings

# Database Configuration (use local PostGIS test DB for GIS-dependent tests)
# Make sure `docker compose -f docker-compose.test.yml up -d` is running.
DATABASE_URL=postgis://nexus_test:secret@127.0.0.1:5433/nexus_test

# Test Database (if needed for specific tests)
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=test_user
DATABASE_PASSWORD=test_password
DATABASE_NAME=test_nexus_db

# Email Configuration (console backend for tests)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
EMAIL_HOST=localhost
EMAIL_PORT=25
EMAIL_USE_TLS=False
EMAIL_HOST_USER=test@example.com
EMAIL_HOST_PASSWORD=test-password

# AWS/Spaces Configuration (disabled for tests)
USE_SPACES=False
AWS_ACCESS_KEY_ID=test-access-key
AWS_SECRET_ACCESS_KEY=test-secret-key
AWS_STORAGE_BUCKET_NAME=test-bucket
AWS_S3_REGION_NAME=us-east-1

# Redis/Celery Configuration (memory backend for tests)
REDIS_URL=memory://
CELERY_BROKER_URL=memory://
CELERY_RESULT_BACKEND=cache+memory://
CELERY_TASK_ALWAYS_EAGER=True
CELERY_TASK_EAGER_PROPAGATES=True

# Sentry Configuration (disabled for tests)
SENTRY_DSN=

# Third-party API Keys (test values)
STRIPE_PUBLIC_KEY=pk_test_testing
STRIPE_SECRET_KEY=sk_test_testing
TWILIO_ACCOUNT_SID=test_account_sid
TWILIO_AUTH_TOKEN=test_auth_token
SENDGRID_API_KEY=test_sendgrid_key

# FlexPay Configuration (test values)
FLEXPAY_API_URL=https://test.flexpay.example.com
FLEXPAY_API_KEY=test-flexpay-key

# Application Settings
ALLOWED_HOSTS=localhost,127.0.0.1,testserver
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# Test-specific settings
TESTING=True
